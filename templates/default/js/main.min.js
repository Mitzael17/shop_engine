(()=>{"use strict";!function(t,e,i=!0,s=!1,n=!1,a=!1){if(t=document.querySelector(t),e=document.querySelector(e),s)for(let t of s)t.addEventListener("click",o);function o(o){if(s&&n&&[...s].find(((t,e)=>t===o.target&&n[e]<=window.innerWidth)))return!1;if(t.classList.toggle("active"),e.classList.toggle("active"),i&&document.documentElement.classList.toggle("blocked"),a)for(let t of a)t.classList.toggle("active")}t.addEventListener("click",o)}(".headerMenu__burger",".headerMenu__nav",!0,[document.querySelector(".headerMenu__cross")]),new class{constructor(t=".MiDropList",e=".MiDropList__list",i=!1,...s){if(s.length>=2){this.medias=[],s.forEach((t=>this.medias.push(t.media)));let t=window.innerWidth;this.activeMedia=!1;for(let e=0;e<this.medias.length;e++)if(this.medias[e]<=t){this.activeMedia=this.medias[e];break}for(let t of s)t.media===this.activeMedia&&(this.settings={event:t.event?t.event:"hover",animation:t.animation?t.animation:"opacity",delay:t.delay?t.delay:"2000",duration:t.duration?t.duration:"700",timingFunction:t.timingFunction?t.timingFunction:"linear",protected:t.protected?t.protected:"0",waitOtherLists:void 0!==t.waitOtherLists&&t.waitOtherLists,media:t.media,closeOtherLists:void 0===t.closeOtherLists||t.closeOtherLists},this.settings.changeListDuration=t.changeListDuration?t.changeListDuration:this.settings.duration);window.addEventListener("resize",(()=>{let t=window.innerWidth;for(let e=0;e<this.medias.length;e++){if(this.medias[e-1]&&this.medias[e-1]>this.medias[e]&&this.medias[e-1]<t)return!1;if(this.medias[e]<=t&&this.medias[e]!==this.activeMedia){this.activeMedia=this.medias[e],this.rebuild(s.find((t=>t.media===this.activeMedia)),i);break}}}))}else this.settings={event:s[0].event?s[0].event:"hover",animation:s[0].animation?s[0].animation:"opacity",delay:s[0].delay?s[0].delay:"2000",duration:s[0].duration?s[0].duration:"700",timingFunction:s[0].timingFunction?s[0].timingFunction:"linear",waitOtherLists:void 0!==s[0].waitOtherLists&&s[0].waitOtherLists,protected:s[0].protected?s[0].protected:"0",closeOtherLists:void 0===s[0].closeOtherLists||s[0].closeOtherLists},this.settings.changeListDuration=s[0].changeListDuration?s[0].changeListDuration:this.settings.duration;this.mainSelector=t,this.listSelector=e,this.timerShowList=null,this.timerHideList=null,this.date=null,this.clearList=!1,this.class_active=this.listSelector.substring(1)+"__MiDropList--active",this.dateBeginAppering,this.differenceTimeApDisAp,this.dateBeginDisappering,this.activeList,this.hover=!1,this.click=!1,[...document.querySelectorAll(this.mainSelector)].forEach((t=>{"hover"===this.settings.event&&(this.hover=!0,t.addEventListener("pointerenter",(t=>{if("hover"!==this.settings.event)return!1;this.#t(t)})),t.addEventListener("pointerleave",(()=>{if("hover"!==this.settings.event)return!1;t.classList.contains(this.class_active)&&this.hide(t)}))),"click"===this.settings.event&&(this.click=!0,t.addEventListener("click",(t=>"click"===this.settings.event&&!t.target.closest(this.listSelector)&&void this.#t(t))))}));for(let t of document.querySelectorAll(this.listSelector))t.style.display="none","growing"===this.settings.animation&&(this.transition=`height ${this.settings.duration}ms ${this.settings.timingFunction}`,t.style.transition=this.transition,t.style.overflow="hidden"),"opacity"===this.settings.animation&&(t.style.opacity="0",this.transition=`opacity ${this.settings.duration}ms ${this.settings.timingFunction}`,t.style.transition=this.transition,t.style.overflow="hidden"),t.addEventListener("transitionend",(t=>{t.target.closest(this.mainSelector).classList.contains(this.class_active)||"0px"!==t.target.style.height&&"0"!==t.target.style.opacity||(t.target.style.display="none")}))}#e(t){t.classList.add(this.class_active);let e=t.querySelector(this.listSelector);"none"===this.settings.animation&&(e.style.display="flex"),"growing"!==this.settings.animation&&"opacity"!==this.settings.animation||(this.timerShowList=setTimeout((()=>{this.dateBeginDisappering=null,this.differenceTimeApDisAp=null,this.dateBeginAppering=Date.now(),e.style.display="flex","growing"===this.settings.animation&&(e.style.height="auto",e.dataset.height=e.offsetHeight+"px",e.style.height="0px"),setTimeout((()=>{if(!t.classList.contains(this.class_active))return e.style.display="none",!1;"growing"===this.settings.animation&&(e.style.height=e.dataset.height),"opacity"===this.settings.animation&&(e.style.opacity=1),this.clearList=!1}),50)}),this.settings.waitOtherLists&&this.clearList?this.#i():0))}hide(t,e=!1){let i=t.querySelector(this.listSelector);"none"===this.settings.animation&&(this.timerHideList=setTimeout((()=>{t.classList.remove(this.class_active),i.style.display="none"}),e?0:this.settings.delay)),"growing"!==this.settings.animation&&"opacity"!==this.settings.animation||(this.timerHideList=setTimeout((()=>{if(t.classList.remove(this.class_active),e){i.addEventListener("transitionend",(()=>{if(i.style.transition===this.transition)return!1;i.style.transition=this.transition}),{once:!0});let t="growing"===this.settings.animation?"height":"opacity";i.style.transition=`${t} ${this.settings.changeListDuration}ms ${this.settings.timingFunction}`}"growing"===this.settings.animation&&(i.style.height="0"),"opacity"===this.settings.animation&&(i.style.opacity="0")}),e?0:this.settings.delay))}#t(t){let e=t.target.closest(this.mainSelector),i=()=>{this.activeList=document.querySelector("."+this.class_active),this.activeList&&this.activeList!==e?this.settings.closeOtherLists&&(clearTimeout(this.timerHideList),this.clearList=!0,this.hide(this.activeList,!0)):clearTimeout(this.timerHideList),clearTimeout(this.timerShowList)};if("click"===this.settings.event){if(Date.now()-this.date<this.settings.protected&&this.date)return!1;this.date=Date.now(),e.classList.contains(this.class_active)?this.hide(e):(i(),this.#e.bind(this)(e))}"hover"===this.settings.event&&(this.timerShowList=setTimeout((()=>{i(),this.#e.bind(this)(e)}),this.settings.protected),t.target.addEventListener("pointerleave",(()=>{this.clearList=!1,clearTimeout(this.timerShowList)}),{once:!0}))}rebuild(t,e=!1){for(let t of document.querySelectorAll(this.listSelector)){t.style.transition="";let e=t.closest(this.mainSelector);e.classList.contains(this.class_active)&&this.hide(e,!0)}e&&e(),this.settings={event:t.event?t.event:"hover",animation:t.animation?t.animation:"opacity",delay:t.delay?t.delay:"2000",duration:t.duration?t.duration:"700",timingFunction:t.timingFunction?t.timingFunction:"linear",protected:t.protected?t.protected:"0",waitOtherLists:void 0!==t.waitOtherLists&&t.waitOtherLists,media:t.media,closeOtherLists:void 0===t.closeOtherLists||t.closeOtherLists},this.settings.changeListDuration=t.changeListDuration?t.changeListDuration:this.settings.duration,[...document.querySelectorAll(this.mainSelector)].forEach((t=>{"hover"!==this.settings.event||this.hover||(t.addEventListener("pointerenter",(t=>{if("hover"!==this.settings.event)return!1;this.#t(t)})),t.addEventListener("pointerleave",(()=>{if("hover"!==this.settings.event)return!1;t.classList.contains(this.class_active)&&this.hide(t)}))),"click"!==this.settings.event||this.click||t.addEventListener("click",(t=>"click"===this.settings.event&&!t.target.closest(this.listSelector)&&void this.#t(t)))})),"hover"===this.settings.event&&(this.hover=!0),"click"===this.settings.event&&(this.click=!0);for(let t of document.querySelectorAll(this.listSelector))t.style.display="none","growing"===this.settings.animation&&(t.style.opacity="1",this.transition=`height ${this.settings.duration}ms ${this.settings.timingFunction}`,t.style.transition=this.transition,t.style.overflow="hidden"),"opacity"===this.settings.animation&&(t.style.height="auto",t.style.opacity="0",this.transition=`opacity ${this.settings.duration}ms ${this.settings.timingFunction}`,t.style.transition=this.transition,t.style.overflow="hidden"),"none"===this.settings.animation&&(t.style.height="auto",t.style.opacity="1")}#i(){return this.differenceTimeApDisAp?(this.differenceTimeApDisAp=this.differenceTimeApDisAp-(Date.now()-this.dateBeginDisappering),this.dateBeginDisappering=Date.now()):(this.dateBeginDisappering=Date.now(),this.differenceTimeApDisAp=this.dateBeginDisappering-this.dateBeginAppering),this.differenceTimeApDisAp<this.settings.changeListDuration&&this.differenceTimeApDisAp>=0?this.differenceTimeApDisAp:this.differenceTimeApDisAp<0?0:this.settings.changeListDuration}}(".MiDropList-refer",".nestedList",(function(){document.documentElement.classList.contains("blocked")&&(document.documentElement.classList.remove("blocked"),document.querySelector(".headerMenu__nav").classList.remove("active"),document.querySelector(".headerMenu__burger").classList.remove("active"))}),{animation:"opacity",event:"hover",duration:"600",protected:"200",timingFunction:"ease",delay:"700",waitOtherLists:!0,media:"831"},{animation:"growing",event:"click",duration:"700",protected:"0",timingFunction:"ease",delay:"0",waitOtherLists:!1,media:"1"});const t=document.querySelectorAll("form");t&&(t.forEach((t=>{[].forEach.call(t.querySelectorAll(".tel"),(function(t){var e;function i(t){t.keyCode&&(e=t.keyCode),this.selectionStart<3&&t.preventDefault();var i="+7 (___) ___ ____",s=0,n=i.replace(/\D/g,""),a=this.value.replace(/\D/g,""),o=i.replace(/[_\d]/g,(function(t){return s<a.length?a.charAt(s++)||n.charAt(s):t}));-1!=(s=o.indexOf("_"))&&(s<5&&(s=3),o=o.slice(0,s));var r=i.substr(0,this.value.length).replace(/_+/g,(function(t){return"\\d{1,"+t.length+"}"})).replace(/[+()]/g,"\\$&");(!(r=new RegExp("^"+r+"$")).test(this.value)||this.value.length<5||e>47&&e<58)&&(this.value=o),"blur"==t.type&&this.value.length<5&&(this.value="")}t.addEventListener("input",i,!1),t.addEventListener("focus",i,!1),t.addEventListener("blur",i,!1),t.addEventListener("keydown",i,!1),t.dispatchEvent(new Event("input"))}))})),function(t){let e={method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Token 14dbf845efde22f64536669c02052e6366f65aba"}};t.forEach((t=>{[].forEach.call(t.querySelectorAll(".address"),(function(t){let i=t.parentElement.querySelector(".popup__address-hints"),s=i.children,n=0,a="";function o(e){if(i.children.length){let o=i.querySelector(".hint-active");if(e.key)switch(e.key){case"ArrowUp":o=o||s[0],n=[...s].indexOf(o)<=0?null:--n;break;case"ArrowDown":o=o||s[s.length-1],n=[...s].indexOf(o)===s.length-1?0:++n;break;default:return t.dispatchEvent(new Event("blur")),!1}else{let t=e.target.closest(".hint");if(!t)return!1;if(t.classList.contains("hint-active"))return!1;n=[...s].indexOf(t)}if(o&&o.classList.remove("hint-active"),null===n)return t.value=a,!1;s[n].classList.add("hint-active"),t.value=s[n].innerHTML,e.key&&(s[n].offsetTop>i.offsetHeight-30?i.scrollTop=s[n].offsetTop-i.offsetHeight+s[n].offsetHeight+30:s[n].offsetTop<=i.offsetHeight&&(i.scrollTop=0))}}function r(t){if(s.length&&[...s].forEach((t=>t.remove())),i)for(let e=0;e<t;e++){let t=document.createElement("div");t.classList.add("hint"),i.append(t)}}r(10),t.addEventListener("blur",(t=>{i.parentElement.style.display="none",r(0)})),i.addEventListener("pointerdown",o),t.addEventListener("keydown",(function(n){if("ArrowUp"===n.key||"ArrowDown"===n.key||"Escape"===n.key||"Enter"===n.key)return n.preventDefault(),o(n),!1;t.addEventListener("keyup",(()=>{a=this.value,a.length?(e.body=JSON.stringify({query:a,count:10,language:"ru"}),fetch("https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/address",e).then((t=>t.json())).then((e=>{let n=i.querySelector(".hint-active");n&&n.classList.remove("hint-active"),i.scrollTop=0,i&&e.suggestions.length?(i.parentElement.style.display="block",e.suggestions||t.dispatchEvent(new Event("blur")),s.length!==e.suggestions.length&&r(e.suggestions.length),e.suggestions.forEach(((t,e)=>{s[e].innerHTML=t.value}))):t.dispatchEvent(new Event("blur"))})).catch((t=>console.log("error",t)))):t.dispatchEvent(new Event("blur"))}),{once:!0})}))}))}))}(t),t.forEach((t=>{}))),Array.prototype.forEach.call(document.body.querySelectorAll("*[data-mask]"),(function(t){var e=t.dataset.mask.split("");function i(){var i=t.selectionStart,s=t.selectionEnd;t.value=function(t){return e.map((function(e){return"_"!=e||0==t.length?e:t.shift()})).join("")}(t.value.split("").filter((function(t){return/\d/.test(t)}))),t.selectionStart=i,t.selectionEnd=s}t.addEventListener("click",i),t.addEventListener("keyup",i)}));const e=document.querySelector(".header-search-field-container");if(e){const t=e.parentElement.querySelector("#search-field-icon"),i=e.querySelector("input");t.addEventListener("click",(t=>{e.classList.toggle("active"),e.classList.contains("active")&&i.focus()}))}})();